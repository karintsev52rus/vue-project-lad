import{d as F,r as _,t as C,a as r,c as w,w as o,o as f,b as s,u as n,e as c,f as M,g as p,h as y,i as I,j as R,F as E,P as G,_ as N,k as L,s as P,l as D}from"./index-b6957c64.js";import{u as q}from"./filters-8faaf73c.js";const z=F({__name:"SearchForm",props:{advertTypes:{},cities:{},instruments:{},styles:{}},emits:["searchFormEmit"],setup(h,{emit:u}){const a=h,e=_({city:null,instrument:null,style:[],advertType:{name:"fromMusicians",label:"от музыкантов",_id:"0"}}),d=_("от музыкантов"),{styles:i,cities:V,instruments:T}=C(a),m=t=>{e.value.city=t},x=t=>{e.value.instrument=t},g=t=>{e.value.style=t},k=t=>{e.value.advertType=t,d.value=d.value==="от музыкантов"?"от групп":"от музыкантов"},b=u,S=()=>{b("searchFormEmit",e.value)};return(t,l)=>{const U=r("v-switch"),$=r("v-autocomplete"),j=r("v-btn"),A=r("v-form"),B=r("v-sheet");return f(),w(B,{"max-width":"450",class:"mx-auto pa-5"},{default:o(()=>[s(A,{onSubmit:M(S,["prevent"])},{default:o(()=>[s(U,{"onUpdate:modelValue":[k,l[0]||(l[0]=v=>e.value.advertType=v)],modelValue:e.value.advertType,"true-value":t.advertTypes.fromGroups,"false-value":t.advertTypes.fromMusicians,label:`Объявления ${d.value}`},null,8,["modelValue","true-value","false-value","label"]),s($,{"onUpdate:modelValue":[x,l[1]||(l[1]=v=>e.value.instrument=v)],modelValue:e.value.instrument,"return-object":"",items:n(T),"item-title":"label",label:"Инструмент"},null,8,["modelValue","items"]),s($,{modelValue:e.value.city,"onUpdate:modelValue":[l[2]||(l[2]=v=>e.value.city=v),m],items:n(V),"return-object":"","item-title":"label",label:"Город"},null,8,["modelValue","items"]),s($,{multiple:"","item-title":"label","return-object":"",modelValue:e.value.style,"onUpdate:modelValue":[l[3]||(l[3]=v=>e.value.style=v),g],items:n(i),label:"Стиль"},null,8,["modelValue","items"]),s(j,{color:"primary",type:"submit",block:"",class:"mt-2"},{default:o(()=>[c("Поиск ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})}}}),H={class:"advert_info"},J={class:"advert_info"},K={class:"advert_info"},O={class:"text-center pa-5"},Q=F({__name:"SearchResultItem",props:{advert:{}},setup(h){const u=h,{advert:a}=C(u);return(e,d)=>{const i=r("v-card-title"),V=r("v-card-subtitle"),T=r("v-card-item"),m=r("v-chip"),x=r("v-card-text"),g=r("router-link"),k=r("v-btn"),b=r("v-card");return f(),w(b,{class:"mx-auto advert_card",width:"350"},{default:o(()=>[s(T,null,{default:o(()=>[s(i,null,{default:o(()=>[c(p(n(a).advertType.label),1)]),_:1}),s(V,null,{default:o(()=>[c(p(n(a).authorName),1)]),_:1})]),_:1}),y("div",H,[c(" Город: "),s(m,null,{default:o(()=>[c(p(n(a).city.label),1)]),_:1})]),y("div",J,[c(" Инструмент: "),s(m,null,{default:o(()=>[c(p(n(a).instrument.label),1)]),_:1})]),y("div",K,[c(" Стиль: "),(f(!0),I(E,null,R(n(a).style,S=>(f(),w(m,{key:S._id},{default:o(()=>[c(p(S.label),1)]),_:2},1024))),128))]),s(x,null,{default:o(()=>[c(p(n(a).advertDescription),1)]),_:1}),y("div",O,[s(k,{color:"primary",class:"nav_button"},{default:o(()=>[s(g,{class:"nav_link",to:{name:n(G).ADVERT,params:{id:n(a).id}}},{default:o(()=>[c(" Подробнее ")]),_:1},8,["to"])]),_:1})])]),_:1})}}});const W=N(Q,[["__scopeId","data-v-c119c653"]]),X=F({__name:"SearchResults",props:{adverts:{}},setup(h){const u=h,{adverts:a}=C(u);return(e,d)=>(f(!0),I(E,null,R(n(a),i=>(f(),w(W,{key:i.id,advert:i},null,8,["advert"]))),128))}}),Y={class:"page_container search_page_container"},Z={class:"text-center py-7"},ee={class:"form_container"},te={class:"search_results_container"},se=F({__name:"SearchView",setup(h){L(()=>{V()});const u=q(),{advertTypes:a,instruments:e,styles:d,cities:i}=P(u),{getFiltersData:V}=u,T=_(null),m=_(null),x=_([]),g=_(null),k=_({city:T.value,instrument:m.value,style:x.value,advertType:g.value}),b=_([]),S=t=>{k.value=t,console.log(t),D.getAdverts(t).then(l=>{console.log(l),b.value=l}).catch(l=>{console.log(l)})};return(t,l)=>(f(),I("div",Y,[y("h1",Z,p(t.$route.meta.title),1),y("div",ee,[s(z,{advertTypes:n(a),cities:n(i),instruments:n(e),styles:n(d),onSearchFormEmit:S},null,8,["advertTypes","cities","instruments","styles"])]),y("div",te,[s(X,{adverts:b.value},null,8,["adverts"])])]))}});const ae=N(se,[["__scopeId","data-v-4cfb693a"]]);export{ae as default};
